---
title: "Minimal"
output: rmarkdown::html_vignette
author: "Chris Selig"
date: "`r Sys.Date()`"
vignette: >
  %\VignetteIndexEntry{minimal}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(r.data.pipeline)
```

<!-- WARNING - This vignette is generated by {fusen} from dev/pipeline.rmd: do not edit by hand -->

## Description

This file is used to download the traffic incidents and construction detours data from the [YYC Open data portal](https://data.calgary.ca/), using the provided API url.

[traffic incidents url](https://data.calgary.ca/resource/35ra-9556.csv)
[construction detours](https://data.calgary.ca/resource/w8zq-79bq.csv)

Traffic incidents are updated on the Open data portal every 10min
Construction detours are updated on the Open data portal every day at 3am and 3pm

License/Attribution:  Contains information licensed under the Open Government Licence â€“ City of Calgary.



### Load Packages

```{r loadPackages, warning = FALSE, message = FALSE}
library(dplyr)
library(lubridate)
library(readr)
library(janitor)
library(arrow)
library(readr)
```

### Create Functions 

```{r examples-download_data, eval = FALSE}
traffic_incidents_url <- "https://data.calgary.ca/resource/35ra-9556.csv"

# Running the functions
download_data(url = traffic_incidents_url, destfile = "00_data/traffic_incidents.csv")

```

## Data Wrangling

Using the janitor package, clean the names of the columns and using the lubridate package, convert the date columns to date time format. This data wrangling is completed for each of the downloaded data sets.


